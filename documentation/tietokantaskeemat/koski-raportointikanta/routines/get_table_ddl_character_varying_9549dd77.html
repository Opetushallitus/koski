<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>raportointikanta.public</title>
        <!-- Tell the browser to be responsive to screen width -->
        <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
        <link rel="icon" type="image/png" sizes="16x16" href="../favicon.png">
        <!-- Bootstrap 3.3.5 -->
        <link rel="stylesheet" href="../bower/admin-lte/bootstrap/css/bootstrap.min.css">
        <!-- Font Awesome -->
        <link rel="stylesheet" href="../bower/font-awesome/css/font-awesome.min.css">
        <!-- Ionicons -->
        <link rel="stylesheet" href="../bower/ionicons/css/ionicons.min.css">
        <!-- DataTables -->
        <link rel="stylesheet" href="../bower/datatables.net-bs/css/dataTables.bootstrap.min.css">
        <link rel="stylesheet" href="../bower/datatables.net-buttons-bs/css/buttons.bootstrap.min.css">
        <!-- Code Mirror -->
        <link rel="stylesheet" href="../bower/codemirror/codemirror.css">
        <!-- Fonts -->
        <link href='../fonts/indieflower/indie-flower.css' rel='stylesheet' type='text/css'>
        <link href='../fonts/source-sans-pro/source-sans-pro.css' rel='stylesheet' type='text/css'>

        <!-- Theme style -->
        <link rel="stylesheet" href="../bower/admin-lte/dist/css/AdminLTE.min.css">
        <!-- Salvattore -->
        <link rel="stylesheet" href="../bower/salvattore/salvattore.css">
        <!-- AdminLTE Skins. Choose a skin from the css/skins
           folder instead of downloading all of them to reduce the load. -->
        <link rel="stylesheet" href="../bower/admin-lte/dist/css/skins/_all-skins.min.css">
        <!-- SchemaSpy -->
        <link rel="stylesheet" href="../schemaSpy.css">

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="../bower/html5shiv/html5shiv.min.js"></script>
        <script src="../bower/respond/respond.min.js"></script>
        <![endif]-->
    </head>
    <!-- ADD THE CLASS layout-top-nav TO REMOVE THE SIDEBAR. -->
    <body class="hold-transition skin-blue layout-top-nav">
        <div class="wrapper">
            <header class="main-header">
                <nav class="navbar navbar-static-top">
                    <div class="container">
                        <div class="navbar-header">
                            <a href="../index.html" class="navbar-brand"><b>raportointikanta</b></a><span class="navbar-brand" style="padding-left: 0">.public</span>
                            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse"><i class="fa fa-bars"></i></button>
                        </div>

                        <!-- Collect the nav links, forms, and other content for toggling -->
                        <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                            <ul class="nav navbar-nav">
                                <li><a href="../index.html">Tables <span class="sr-only">(current)</span></a></li>
                                <li><a href="../columns.html" title="All of the columns in the schema">Columns</a></li>
                                <li><a href="../constraints.html" title="Useful for diagnosing error messages that just give constraint name or number">Constraints</a></li>
                                <li><a href="../relationships.html" title="Diagram of table relationships">Relationships</a></li>
                                <li><a href="../orphans.html" title="View of tables with neither parents nor children">Orphan&nbsp;Tables</a></li>
                                <li><a href="../anomalies.html" title="Things that might not be quite right">Anomalies</a></li>
                                <li><a href="../routines.html" title="Procedures and functions">Routines</a></li>
                            </ul>
                        </div>
                        <!-- /.navbar-collapse -->
                        <!-- Navbar Right Menu -->
                    </div>
                    <!-- /.container-fluid -->
                </nav>
            </header>
            <!-- Main content -->
            <!-- Full Width Column -->
            <div class="content-wrapper">
                <!-- Content Header (Page header) -->
                <section class="content-header">
                    <h1>get_table_ddl(character varying, character varying, boolean)</h1><br />
                </section>
                <!-- Main content -->
                <section class="content">
                    <div class="box box-primary">
                        <div class="box-header with-border">
                            <span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span>
                            <h3 id="Columns" class="box-title">Parameters</h3>
                            <div class="box-tools pull-right">
                                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                            </div>
                        </div>
                        <div class="box-body">
                            <table id="standard_table" class="table table-bordered table-striped dataTable" role="grid">
                                <thead align='left'>
                                <tr>
                                    <th>Name</th>
                                    <th>Type</th>
                                    <th>Mode</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>in_schema</td>
                                    <td>character varying</td>
                                    <td>IN</td>
                                </tr>
                                <tr>
                                    <td>in_table</td>
                                    <td>character varying</td>
                                    <td>IN</td>
                                </tr>
                                <tr>
                                    <td>bfkeys</td>
                                    <td>boolean</td>
                                    <td>IN</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="box box-primary">
                        <div class="box-header with-border">
                            <i class="fa fa-file-code-o"></i>
                            <h3 id="RoutineDefinition" class="box-title">Definition</h3>
                            <div class="box-tools pull-right">
                                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                            </div>
                        </div>
                        <div class="box-body">
                            <textarea id="sql-script-codemirror" name="sql-script-codemirror" rows="" style="display: none;">DECLARE&#10;    -- the ddl we&#39;re building&#10;    v_table_ddl text;&#10;&#10;    -- data about the target table&#10;    v_table_oid int;&#10;&#10;    -- records for looping&#10;    v_colrec record;&#10;    v_constraintrec record;&#10;    v_indexrec record;&#10;    v_primary boolean :&#61; False;&#10;    v_constraint_name text;&#10;    v_src_path_old text :&#61; &#39;&#39;;&#10;    v_src_path_new text :&#61; &#39;&#39;;&#10;    v_dummy text;&#10;    v_partbound text;&#10;    v_pgversion int;&#10;    v_parent     text :&#61; &#39;&#39;;&#10;    v_relopts text :&#61; &#39;&#39;;&#10;    v_tablespace text;&#10;    v_partition_key text :&#61; &#39;&#39;;&#10;    v_temp       text;&#10;    bPartitioned bool :&#61; False;&#10;    bInheritance bool :&#61; False;&#10;    bRelispartition bool;&#10;    constraintarr text[] :&#61; &#39;{}&#39;;&#10;    constraintelement text;&#10;    bSkip boolean;&#10;&#10;  BEGIN&#10;    SELECT c.oid, (&#10;        SELECT setting&#10;        FROM pg_settings&#10;        WHERE name &#61; &#39;server_version_num&#39;) INTO v_table_oid, v_pgversion&#10;    FROM pg_catalog.pg_class c&#10;        LEFT JOIN pg_catalog.pg_namespace n ON n.oid &#61; c.relnamespace&#10;    WHERE c.relkind IN (&#39;r&#39;, &#39;p&#39;)&#10;        AND c.relname &#61; in_table&#10;        AND n.nspname &#61; in_schema;&#10;    IF (v_table_oid IS NULL) THEN&#10;      RAISE EXCEPTION &#39;table does not exist&#39;;&#10;    END IF;&#10;&#10;    -- get user-defined tablespaces if applicable&#10;    SELECT TABLESPACE INTO v_temp&#10;    FROM pg_tables&#10;    WHERE schemaname &#61; in_schema&#10;        AND tablename &#61; in_table&#10;        AND TABLESPACE IS NOT NULL;&#10;    -- Issue#99 Fix: simple coding error!&#10;    -- IF v_tablespace IS NULL THEN&#10;    IF v_temp IS NULL THEN&#10;      v_tablespace :&#61; &#39;TABLESPACE pg_default&#39;;&#10;    ELSE&#10;      v_tablespace :&#61; &#39;TABLESPACE &#39; || v_temp;&#10;    END IF;&#10;    -- also see if there are any SET commands for this table, ie, autovacuum_enabled&#61;off, fillfactor&#61;70&#10;    WITH relopts AS (&#10;        SELECT unnest(c.reloptions) relopts&#10;        FROM pg_class c, pg_namespace n&#10;        WHERE n.nspname &#61; in_schema&#10;            AND n.oid &#61; c.relnamespace&#10;            AND c.relname &#61; in_table&#10;    )&#10;    SELECT string_agg(r.relopts, &#39;, &#39;) AS relopts INTO v_temp&#10;    FROM relopts r;&#10;    IF v_temp IS NULL THEN&#10;      v_relopts :&#61; &#39;&#39;;&#10;    ELSE&#10;      v_relopts :&#61; &#39; WITH (&#39; || v_temp || &#39;)&#39;;&#10;    END IF;&#10;&#10;    -- Issue#61 FIX: set search_path &#61; public before we do anything to force explicit schema qualification but dont forget to set it back before exiting...&#10;    SELECT setting INTO v_src_path_old FROM pg_settings WHERE name &#61; &#39;search_path&#39;;&#10;&#10;    SELECT REPLACE(REPLACE(setting, &#39;&quot;$user&quot;&#39;, &#39;$user&#39;), &#39;$user&#39;, &#39;&quot;$user&quot;&#39;) INTO v_src_path_old&#10;    FROM pg_settings&#10;    WHERE name &#61; &#39;search_path&#39;;&#10;    -- RAISE INFO &#39;DEBUG tableddl: saving old search_path: ***%***&#39;, v_src_path_old;&#10;    EXECUTE &#39;SET search_path &#61; &quot;public&quot;&#39;;&#10;    SELECT setting INTO v_src_path_new FROM pg_settings WHERE name &#61; &#39;search_path&#39;;&#10;&#10;    -- grab the oid of the table; https://www.postgresql.org/docs/8.3/catalog-pg-class.html&#10;    SELECT c.oid INTO v_table_oid&#10;    FROM pg_catalog.pg_class c&#10;        LEFT JOIN pg_catalog.pg_namespace n ON n.oid &#61; c.relnamespace&#10;    WHERE 1 &#61; 1&#10;        AND c.relkind &#61; &#39;r&#39;&#10;        AND c.relname &#61; in_table&#10;        AND n.nspname &#61; in_schema;&#10;&#10;    IF (v_table_oid IS NULL) THEN&#10;      -- Dont give up yet.  It might be a partitioned table&#10;      SELECT c.oid INTO v_table_oid&#10;      FROM pg_catalog.pg_class c&#10;          LEFT JOIN pg_catalog.pg_namespace n ON n.oid &#61; c.relnamespace&#10;      WHERE 1 &#61; 1&#10;          AND c.relkind &#61; &#39;p&#39;&#10;          AND c.relname &#61; in_table&#10;          AND n.nspname &#61; in_schema;&#10;&#10;      IF (v_table_oid IS NULL) THEN&#10;        RAISE EXCEPTION &#39;table does not exist&#39;;&#10;      END IF;&#10;      bPartitioned :&#61; True;&#10;    END IF;&#10;    IF v_pgversion &lt; 100000 THEN&#10;      SELECT c2.relname parent INTO v_parent&#10;      FROM pg_class c1, pg_namespace n, pg_inherits i, pg_class c2&#10;      WHERE n.nspname &#61; in_schema&#10;          AND n.oid &#61; c1.relnamespace&#10;          AND c1.relname &#61; in_table&#10;          AND c1.oid &#61; i.inhrelid&#10;          AND i.inhparent &#61; c2.oid&#10;          AND c1.relkind &#61; &#39;r&#39;;&#10;&#10;      IF (v_parent IS NOT NULL) THEN&#10;        bPartitioned :&#61; True;&#10;        bInheritance  :&#61; True;&#10;      END IF;&#10;    ELSE&#10;      SELECT c2.relname parent, c1.relispartition, pg_get_expr(c1.relpartbound, c1.oid, TRUE) INTO v_parent, bRelispartition, v_partbound&#10;      FROM pg_class c1, pg_namespace n, pg_inherits i, pg_class c2&#10;      WHERE n.nspname &#61; in_schema&#10;          AND n.oid &#61; c1.relnamespace&#10;          AND c1.relname &#61; in_table&#10;          AND c1.oid &#61; i.inhrelid&#10;          AND i.inhparent &#61; c2.oid&#10;          AND c1.relkind &#61; &#39;r&#39;;&#10;&#10;      IF (v_parent IS NOT NULL) THEN&#10;        bPartitioned   :&#61; True;&#10;        IF bRelispartition THEN&#10;          bInheritance :&#61; False;&#10;        ELSE&#10;          bInheritance :&#61; True;&#10;        END IF;&#10;      END IF;&#10;    END IF;&#10;    -- RAISE NOTICE &#39;version&#61;%  schema&#61;%  parent&#61;%  relopts&#61;%  tablespace&#61;%  partitioned&#61;%  inherited&#61;%  relispartition&#61;%&#39;,v_pgversion, in_schema, v_parent, v_relopts, v_tablespace, bPartitioned, bInheritance,   bRelispartition;&#10;&#10;    -- start the create definition&#10;    v_table_ddl :&#61; &#39;CREATE TABLE &#39; || in_schema || &#39;.&#39; || in_table || &#39; (&#39; || E&#39;\n&#39;;&#10;&#10;    -- define all of the columns in the table; https://stackoverflow.com/a/8153081/3068233&#10;    FOR v_colrec IN&#10;      SELECT c.column_name, c.data_type, c.udt_name, c.udt_schema, c.character_maximum_length, c.is_nullable, c.column_default, c.numeric_precision, c.numeric_scale, c.is_identity, c.identity_generation&#10;      FROM information_schema.columns c&#10;      WHERE (table_schema, table_name) &#61; (in_schema, in_table)&#10;      ORDER BY ordinal_position&#10;    LOOP&#10;      v_table_ddl :&#61; v_table_ddl || &#39;  &#39; -- note: two char spacer to start, to indent the column&#10;        || v_colrec.column_name || &#39; &#39;&#10;        -- FIX #82, FIX #100 as well by adding &#39;citext&#39; to the list&#10;        -- FIX #105 by overriding the previous fixes (#82, #100), which presumed &quot;public&quot; was always the schema for extensions.  It could be a custom schema.&#10;        -- so assume udt_schema for all USER-DEFINED datatypes&#10;        -- || CASE WHEN v_colrec.udt_name in (&#39;geometry&#39;, &#39;box2d&#39;, &#39;box2df&#39;, &#39;box3d&#39;, &#39;geography&#39;, &#39;geometry_dump&#39;, &#39;gidx&#39;, &#39;spheroid&#39;, &#39;valid_detail&#39;,&#39;citext&#39;)&#10;        --        THEN v_colrec.udt_name&#10;           || CASE WHEN v_colrec.data_type &#61; &#39;USER-DEFINED&#39;&#10;               -- THEN in_schema || &#39;.&#39; || v_colrec.udt_name ELSE v_colrec.data_type END&#10;               THEN v_colrec.udt_schema || &#39;.&#39; || v_colrec.udt_name ELSE v_colrec.data_type END&#10;        || CASE WHEN v_colrec.is_identity &#61; &#39;YES&#39;&#10;               THEN&#10;                  CASE WHEN v_colrec.identity_generation &#61; &#39;ALWAYS&#39;&#10;                      THEN &#39; GENERATED ALWAYS AS IDENTITY&#39; ELSE &#39; GENERATED BY DEFAULT AS IDENTITY&#39; END ELSE &#39;&#39; END&#10;        || CASE WHEN v_colrec.character_maximum_length IS NOT NULL&#10;               THEN (&#39;(&#39; || v_colrec.character_maximum_length || &#39;)&#39;)&#10;           WHEN v_colrec.numeric_precision &gt; 0 AND v_colrec.numeric_scale &gt; 0&#10;               THEN &#39;(&#39; || v_colrec.numeric_precision || &#39;,&#39; || v_colrec.numeric_scale || &#39;)&#39;&#10;           ELSE &#39;&#39; END || &#39; &#39;&#10;        || CASE WHEN v_colrec.is_nullable &#61; &#39;NO&#39;&#10;               THEN &#39;NOT NULL&#39; ELSE &#39;NULL&#39; END&#10;        || CASE WHEN v_colrec.column_default IS NOT null&#10;               THEN (&#39; DEFAULT &#39; || v_colrec.column_default) ELSE &#39;&#39; END&#10;        || &#39;,&#39; || E&#39;\n&#39;;&#10;    END LOOP;&#10;    -- define all the constraints in the; https://www.postgresql.org/docs/9.1/catalog-pg-constraint.html &amp;&amp; https://dba.stackexchange.com/a/214877/75296&#10;    -- Issue#103: do not get foreign keys for partitions since they are defined on the parent and this will cause an &quot;already exists&quot; error otherwise&#10;    --            Also conparentid is not in V10, so bypass since we do not have FKEYS in partitioned tables in V10&#10;    IF v_pgversion &lt; 110000 THEN&#10;      FOR v_constraintrec IN&#10;        SELECT&#10;          con.conname as constraint_name,&#10;          con.contype as constraint_type,&#10;          CASE&#10;            WHEN con.contype &#61; &#39;p&#39; THEN 1 -- primary key constraint&#10;            WHEN con.contype &#61; &#39;u&#39; THEN 2 -- unique constraint&#10;            WHEN con.contype &#61; &#39;f&#39; THEN 3 -- foreign key constraint&#10;            WHEN con.contype &#61; &#39;c&#39; THEN 4&#10;            ELSE 5&#10;          END as type_rank,&#10;          pg_get_constraintdef(con.oid) as constraint_definition&#10;        FROM pg_catalog.pg_constraint con&#10;            JOIN pg_catalog.pg_class rel ON rel.oid &#61; con.conrelid&#10;            JOIN pg_catalog.pg_namespace nsp ON nsp.oid &#61; connamespace&#10;        WHERE nsp.nspname &#61; in_schema&#10;            AND rel.relname &#61; in_table&#10;            ORDER BY type_rank&#10;      LOOP&#10;        -- Issue#85 fix&#10;        -- constraintarr :&#61; constraintarr || v_constraintrec.constraint_name;&#10;        constraintarr :&#61; constraintarr || v_constraintrec.constraint_name::text;&#10;        IF v_constraintrec.type_rank &#61; 1 THEN&#10;            v_primary :&#61; True;&#10;            v_constraint_name :&#61; v_constraintrec.constraint_name;&#10;        END IF;&#10;        IF NOT bfkeys AND v_constraintrec.constraint_type &#61; &#39;f&#39; THEN&#10;            continue;&#10;        END IF;&#10;        v_table_ddl :&#61; v_table_ddl || &#39;  &#39; -- note: two char spacer to start, to indent the column&#10;          || &#39;CONSTRAINT&#39; || &#39; &#39;&#10;          || v_constraintrec.constraint_name || &#39; &#39;&#10;          || v_constraintrec.constraint_definition&#10;          || &#39;,&#39; || E&#39;\n&#39;;&#10;      END LOOP;&#10;    ELSE&#10;      FOR v_constraintrec IN&#10;        SELECT&#10;          con.conname as constraint_name,&#10;          con.contype as constraint_type,&#10;          CASE&#10;            WHEN con.contype &#61; &#39;p&#39; THEN 1 -- primary key constraint&#10;            WHEN con.contype &#61; &#39;u&#39; THEN 2 -- unique constraint&#10;            WHEN con.contype &#61; &#39;f&#39; THEN 3 -- foreign key constraint&#10;            WHEN con.contype &#61; &#39;c&#39; THEN 4&#10;            ELSE 5&#10;          END as type_rank,&#10;          pg_get_constraintdef(con.oid) as constraint_definition&#10;        FROM pg_catalog.pg_constraint con&#10;            JOIN pg_catalog.pg_class rel ON rel.oid &#61; con.conrelid&#10;            JOIN pg_catalog.pg_namespace nsp ON nsp.oid &#61; connamespace&#10;        WHERE nsp.nspname &#61; in_schema&#10;            AND rel.relname &#61; in_table&#10;            -- Issue#103: do not get partitioned tables&#10;            AND con.conparentid &#61; 0&#10;        ORDER BY type_rank&#10;      LOOP&#10;        -- Issue#85 fix&#10;        -- constraintarr :&#61; constraintarr || v_constraintrec.constraint_name;&#10;        constraintarr :&#61; constraintarr || v_constraintrec.constraint_name::text;&#10;        IF v_constraintrec.type_rank &#61; 1 THEN&#10;            v_primary :&#61; True;&#10;            v_constraint_name :&#61; v_constraintrec.constraint_name;&#10;        END IF;&#10;        IF NOT bfkeys AND v_constraintrec.constraint_type &#61; &#39;f&#39; THEN&#10;            continue;&#10;        END IF;&#10;        v_table_ddl :&#61; v_table_ddl || &#39;  &#39; -- note: two char spacer to start, to indent the column&#10;          || &#39;CONSTRAINT&#39; || &#39; &#39;&#10;          || v_constraintrec.constraint_name || &#39; &#39;&#10;          || v_constraintrec.constraint_definition&#10;          || &#39;,&#39; || E&#39;\n&#39;;&#10;      END LOOP;&#10;    END IF;&#10;&#10;    -- drop the last comma before ending the create statement&#10;    v_table_ddl &#61; substr(v_table_ddl, 0, length(v_table_ddl) - 1) || E&#39;\n&#39;;&#10;    -- end the create table def but add inherits clause if valid&#10;    IF bPartitioned and bInheritance THEN&#10;      v_table_ddl :&#61; v_table_ddl || &#39;) INHERITS (&#39; || in_schema || &#39;.&#39; || v_parent || &#39;) &#39; || v_relopts || &#39; &#39; || v_tablespace || &#39;;&#39; || E&#39;\n&#39;;&#10;    ELSIF v_pgversion &gt;&#61; 100000 AND bPartitioned and NOT bInheritance THEN&#10;      -- See if this is a partitioned table (pg_class.relkind &#61; &#39;p&#39;) and add the partitioned key&#10;      SELECT pg_get_partkeydef (c1.oid) AS partition_key INTO v_partition_key&#10;      FROM pg_class c1&#10;          JOIN pg_namespace n ON (n.oid &#61; c1.relnamespace)&#10;          LEFT JOIN pg_partitioned_table p ON (c1.oid &#61; p.partrelid)&#10;      WHERE n.nspname &#61; in_schema&#10;          AND n.oid &#61; c1.relnamespace&#10;          AND c1.relname &#61; in_table&#10;          AND c1.relkind &#61; &#39;p&#39;;&#10;    END IF;&#10;    IF v_partition_key IS NOT NULL AND v_partition_key &lt;&gt; &#39;&#39; THEN&#10;      -- add partition clause&#10;      -- NOTE:  cannot specify default tablespace for partitioned relations&#10;      v_table_ddl :&#61; v_table_ddl || &#39;) PARTITION BY &#39; || v_partition_key || &#39;;&#39; || E&#39;\n&#39;;&#10;    ELSIF bPartitioned AND not bInheritance THEN&#10;      IF v_relopts &lt;&gt; &#39;&#39; THEN&#10;        v_table_ddl :&#61; &#39;CREATE TABLE &#39; || in_schema || &#39;.&#39; || in_table || &#39; PARTITION OF &#39; || in_schema || &#39;.&#39; || v_parent || &#39; &#39; || v_partbound || v_relopts || &#39; &#39; || v_tablespace || &#39;; &#39; || E&#39;\n&#39;;&#10;      ELSE&#10;        v_table_ddl :&#61; &#39;CREATE TABLE &#39; || in_schema || &#39;.&#39; || in_table || &#39; PARTITION OF &#39; || in_schema || &#39;.&#39; || v_parent || &#39; &#39; || v_partbound || &#39; &#39; || v_tablespace || &#39;; &#39; || E&#39;\n&#39;;&#10;      END IF;&#10;    ELSIF bPartitioned and bInheritance THEN&#10;      -- we already did this above&#10;      v_table_ddl :&#61; v_table_ddl;&#10;    ELSIF v_relopts &lt;&gt; &#39;&#39; THEN&#10;      v_table_ddl :&#61; v_table_ddl || &#39;) &#39; || v_relopts || &#39; &#39; || v_tablespace || &#39;;&#39; || E&#39;\n&#39;;&#10;    ELSE&#10;      v_table_ddl :&#61; v_table_ddl || &#39;) &#39; || v_tablespace || &#39;;&#39; || E&#39;\n&#39;;&#10;    END IF;&#10;    -- suffix create statement with all of the indexes on the table&#10;    FOR v_indexrec IN&#10;      SELECT indexdef, indexname&#10;      FROM pg_indexes&#10;      WHERE (schemaname, tablename) &#61; (in_schema, in_table)&#10;    LOOP&#10;      -- Issue#83 fix: loop through constraints and skip ones already defined&#10;      bSkip &#61; False;&#10;      FOREACH constraintelement IN ARRAY constraintarr&#10;      LOOP&#10;         IF constraintelement &#61; v_indexrec.indexname THEN&#10;             bSkip &#61; True;&#10;             EXIT;&#10;         END IF;&#10;      END LOOP;&#10;      if bSkip THEN CONTINUE; END IF;&#10;      v_table_ddl :&#61; v_table_ddl&#10;        || v_indexrec.indexdef&#10;        || &#39;;&#39; || E&#39;\n&#39;;&#10;    END LOOP;&#10;&#10;    -- reset search_path back to what it was&#10;    IF v_src_path_old &#61; &#39;&#39; THEN&#10;      SELECT set_config(&#39;search_path&#39;, &#39;&#39;, false) into v_dummy;&#10;    ELSE&#10;      EXECUTE &#39;SET search_path &#61; &#39; || v_src_path_old;&#10;    END IF;&#10;    -- RAISE NOTICE &#39;DEBUG tableddl: reset search_path back to ***%***&#39;, v_src_path_old;&#10;&#10;    -- return the ddl&#10;    RETURN v_table_ddl;&#10;  END;</textarea>
                        </div>
                    </div>
                </section>
            </div>
            <!-- /.content-wrapper -->
            <footer class="main-footer">
                <div>
                    <div class="pull-right hidden-xs">
                        <a href="https://github.com/schemaspy/schemaspy" title="GitHub for SchemaSpy"><i class="fa fa-github-square fa-2x"></i></a>
                        <a href="http://stackoverflow.com/questions/tagged/schemaspy" title="StackOverflow for SchemaSpy"><i class="fa fa-stack-overflow fa-2x"></i></a>
                    </div>
                    <strong>Generated by <a href="http://schemaspy.org/" class="logo-text"><i class="fa fa-database"></i> SchemaSpy 6.2.2</a></strong>
                </div>
                <!-- /.container -->
            </footer>
        </div>
        <!-- ./wrapper -->

        <!-- jQuery 2.2.3 -->
        <script src="../bower/admin-lte/plugins/jQuery/jquery-2.2.3.min.js"></script>
        <script src="../bower/admin-lte/plugins/jQueryUI/jquery-ui.min.js"></script>
        <!-- Bootstrap 3.3.5 -->
        <script src="../bower/admin-lte/bootstrap/js/bootstrap.min.js"></script>
        <!-- DataTables -->
        <script src="../bower/datatables.net/jquery.dataTables.min.js"></script>
        <script src="../bower/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
        <script src="../bower/datatables.net-buttons/dataTables.buttons.min.js"></script>
        <script src="../bower/datatables.net-buttons-bs/js/buttons.bootstrap.min.js"></script>
        <script src="../bower/datatables.net-buttons/buttons.html5.min.js"></script>
        <script src="../bower/datatables.net-buttons/buttons.print.min.js"></script>
        <script src="../bower/datatables.net-buttons/buttons.colVis.min.js"></script>
        <!-- SheetJS -->
        <script src="../bower/js-xlsx/xlsx.full.min.js"></script>
        <!-- pdfmake -->
        <script src="../bower/pdfmake/pdfmake.min.js"></script>
        <script src="../bower/pdfmake/vfs_fonts.js"></script>
        <!-- SlimScroll -->
        <script src="../bower/admin-lte/plugins/slimScroll/jquery.slimscroll.min.js"></script>
        <!-- FastClick -->
        <script src="../bower/admin-lte/plugins/fastclick/fastclick.js"></script>
        <!-- Salvattore -->
        <script src="../bower/salvattore/salvattore.min.js"></script>
        <!-- AnchorJS -->
        <script src="../bower/anchor-js/anchor.min.js"></script>
        <!-- CodeMirror -->
        <script src="../bower/codemirror/codemirror.js"></script>
        <script src="../bower/codemirror/sql.js"></script>
        <!-- AdminLTE App -->
        <script src="../bower/admin-lte/dist/js/app.min.js"></script>
        <script src="routine.js"></script>
        <script src="../schemaSpy.js"></script>
    </body>
</html>